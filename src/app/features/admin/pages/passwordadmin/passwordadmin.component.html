<div class="admin-dashboard">

    <!-- ✅ SIDEBAR -->
    <div class="sidebar" [class.active]="showSidebarMobile || isDesktop">
      <div class="logo text-center mb-4">
        <img src="assets/images/LOGO_YAFI__2_-removebg-preview.png" alt="Logo" class="img-fluid" style="max-height: 50px;" />
      </div>

      <ul class="nav nav-pills flex-column">
        <li class="nav-item mb-2">
          <a class="nav-link" href="/admin/dashboard"><i class="bi bi-speedometer2 me-2"></i> Tableau de bord</a>
        </li>
        <li class="nav-item mb-2">
          <a class="nav-link" href="/admin/agent"><i class="bi bi-person-badge me-2"></i> Gestion des agents</a>
        </li>
        <li class="nav-item mb-2">
          <a class="nav-link " href="/admin/ticket"><i class="bi bi-journal-text me-2"></i> Tickets</a>
        </li>
        <li class="nav-item mb-2">
          <a class="nav-link " href="/admin/profil"><i class="bi bi-person-circle me-2"></i> Profil</a>
        </li>
        <li class="nav-item mb-2">
          <a class="nav-link active" href="/admin/password"><i class="bi bi-lock me-2"></i> Mot de passe</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" (click)="logout()"><i class="bi bi-box-arrow-right me-2"></i> Déconnexion</a>
        </li>
      </ul>
    </div>

    <!-- ✅ OVERLAY (petit écran uniquement) -->
    <div class="sidebar-overlay" [class.active]="showSidebarMobile" (click)="toggleSidebar()"></div>

    <!-- ✅ CONTENU PRINCIPAL -->
    <div class="main-content">
      <!-- ✅ NAVBAR HORIZONTALE -->
      <nav class="navbar navbar-light bg-light shadow-sm px-3 d-flex justify-content-between align-items-center">
        <button class="btn d-md-none" (click)="toggleSidebar()">
          <i class="bi bi-list fs-2 text-danger"></i>
        </button>
        <span class="navbar-text fw-bold text-uppercase mx-auto">Admin Yafi</span>
        <div class="d-none d-md-block" style="width: 40px;"></div>
      </nav>

      <br><br><br>
      <!-- ✅ -----------------------------------------------------SECTION MOT DE PASSE -->
      <div class="container py-4 row justify-content-center" >

         <!-- ✅ -----------------------------------------------------SECTION MOT DE PASSE -->

        <div class="card p-4 login-card">
          <h3 class="text-center fw-bold">Modifier mot de passe</h3>


   <!-- DEBUT MESSAGE D ERREUR -->

      <div *ngIf="passwordMessage" class="password-warning">
  <span class="icon">&#9888;</span> <!-- Icône Unicode -->
  <span class="message">{{ passwordMessage }}</span>
  <button class="close-btn" (click)="passwordMessage = ''">&times;</button>
</div>
<br>
<!-- FIN MESSAGE D ERREUR -->


      <form  [formGroup]="registerForm" (ngSubmit)="onChangePassword()">

          <!-- Champ Mot de passe -->
          <div class="mb-3" >
              <!-- <label class="form-label">Mot de passe</label> -->
              <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-lock"></i></span>
                  <input [(ngModel)]="oldPassword" [type]="showPassword ? 'text' : 'password'" class="form-control" placeholder="Entrer votre mot de passe" formControlName="password">
                  

                  <!-- <button type="button" class="btn btn-outline-secondary" (click)="togglePassword()">
                      <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
                    </button> -->
              </div>
              <div *ngIf="submitted && f['password'].errors" class="text-danger">
                  <small *ngIf="f['password'].errors['required']">Mot de passe requis.</small>
                  <small *ngIf="f['password'].errors['minlength']">Minimum 8 caractères.</small>
                  <small *ngIf="f['password'].errors['pattern']">
                    Doit contenir une majuscule, une minuscule, un chiffre et un caractère spécial.
                  </small>
              </div>
          </div>


          <!-- Champ Nouveau Mot de passe -->

 <div class="mb-3" >
              <!-- <label class="form-label">Mot de passe</label> -->
              <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-lock"></i></span>
                 
                  <input [(ngModel)]="newPassword" placeholder="Nouveau mot de passe" [type]="showPassword ? 'text' : 'password'" class="form-control" formControlName="password">

                  <!-- <button type="button" class="btn btn-outline-secondary" (click)="togglePassword()">
                      <i class="bi" [ngClass]="showPassword ? 'bi-eye-slash' : 'bi-eye'"></i>
                    </button> -->
              </div>
              <div *ngIf="submitted && f['password'].errors" class="text-danger">
                  <small *ngIf="f['password'].errors['required']">Mot de passe requis.</small>
                  <small *ngIf="f['password'].errors['minlength']">Minimum 8 caractères.</small>
                  <small *ngIf="f['password'].errors['pattern']">
                    Doit contenir une majuscule, une minuscule, un chiffre et un caractère spécial.
                  </small>
              </div>
          </div>


          <!-- Champ Confime Mot de passe -->
          <!-- <div class="mb-3">
              
              <div class="input-group">
                  <span class="input-group-text"><i class="bi bi-lock"></i></span>
                 
                  <input placeholder="Confirmer Mot de passe" [type]="showPassword ? 'text' : 'password'" class="form-control" formControlName="confirmPassword">
                  <div *ngIf="submitted && registerForm.errors?.['notMatching']" class="text-danger">
                      <small> Les mots de passe ne correspondent pas identique</small>
                    </div>
                 
              </div>
          </div> -->

          <!-- Bouton Se connecter -->
          <button class="btn btn-danger w-100" type="submit" >Modifier mot de passe</button>



      </form>
      <!-- <p *ngIf="passwordMessage">{{ passwordMessage }}</p> -->
       <!-- <p class="text-first mt-2" data-bs-target="#exampleModal"  data-bs-toggle="modal">
 <a class="text-decoration-none text-danger forgot-password-link" >
  Mot de passe oublié ?
</a>
</p> -->
      </div>

    <!-- ✅ -----------------------------------------------------FIN SECTION MOT DE PASSE -->

          </div>

<!-- ✅ -----------------------------------------------------FIN SECTION MOT DE PASSE -->





      </div>
    </div>







    <script >var myModal = document.getElementById('myModal')
      var myInput = document.getElementById('myInput')

      myModal.addEventListener('shown.bs.modal', function () {
        myInput.focus()
      })</script>

<script src="Modal/bootstrap-5.0.2-dist/js/bootstrap.min.js"></script>